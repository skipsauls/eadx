{"result":[{"workflowDefinition":{"Extract_PricebookEntry":{"action":"sfdcDigest","parameters":{"SFDCtoken":"SFDCtoken","fields":[{"name":"Id"},{"name":"Product2Id"}],"object":"PricebookEntry"}},"Extract_Opportunity":{"action":"sfdcDigest","parameters":{"SFDCtoken":"SFDCtoken","fields":[{"name":"Id"},{"name":"AccountId"},{"name":"OwnerId"},{"name":"Name"},{"name":"StageName"},{"name":"LeadSource"},{"name":"IsWon"},{"name":"Type"},{"name":"IsClosed"},{"name":"ForecastCategory"},{"name":"ForecastCategoryName"},{"fiscalMonthOffset":0,"name":"CreatedDate"},{"fiscalMonthOffset":0,"name":"CloseDate"},{"name":"Amount"},{"name":"CreatedById"}],"object":"Opportunity"}},"Extract_OpportunityAmount":{"action":"sfdcDigest","parameters":{"SFDCtoken":"SFDCtoken","fields":[{"name":"Id"},{"name":"Amount"}],"object":"Opportunity"}},"Extract_Product":{"action":"sfdcDigest","parameters":{"SFDCtoken":"SFDCtoken","fields":[{"name":"Id"},{"name":"ProductCode"},{"name":"Name"},{"name":"Family"}],"object":"Product2"}},"Extract_User":{"action":"sfdcDigest","parameters":{"SFDCtoken":"SFDCtoken","fields":[{"name":"Id"},{"name":"Username"},{"name":"Name"},{"name":"FirstName"},{"name":"LastName"},{"name":"UserRoleId"},{"name":"IsActive"}],"object":"User"}},"Extract_OpportunityStage":{"action":"sfdcDigest","parameters":{"fields":[{"name":"IsClosed"},{"fiscalMonthOffset":0,"name":"CreatedDate"},{"name":"Description"},{"name":"ForecastCategory"},{"name":"ForecastCategoryName"},{"name":"IsActive"},{"fiscalMonthOffset":0,"name":"LastModifiedDate"},{"name":"MasterLabel"},{"name":"Id"},{"name":"DefaultProbability"},{"name":"SortOrder"},{"name":"SystemModstamp"},{"name":"IsWon"}],"object":"OpportunityStage"}},"Join_TaskOwner_Product_Opp":{"action":"augment","parameters":{"right_key":["Id"],"left":"Join_TaskOwner_Product","left_key":["WhatId"],"right_select":["Id","Name","Type","OwnerId","IsWon","IsClosed","AccountId","CloseDate","StageName","CreatedDate","LeadSource","ForecastCategoryName","Account.Name","Account.Type","Account.Industry","Account.AccountSource","Account.BillingCountry","Account.BillingState"],"right":"Join_OpportunityOwner","relationship":"Opportunity"}},"Join_OpportunityStage_Previous_with_Opp":{"action":"augment","parameters":{"right_key":["Id"],"left":"Join_OpportunityStage_Previous","left_key":["OpportunityId"],"right_select":["Name","Type","IsWon","IsClosed","OwnerId","AccountId","CloseDate","StageName","LeadSource","ForecastCategoryName","Account.Name","Account.Type","Account.Industry","Account.AccountSource","Account.BillingState","Account.BillingCountry","Owner.Name","Owner.RoleNames","Owner.Role.Name","Owner.Role.DeveloperName","Owner.Role.Roles","Owner.Role.RolePath"],"right":"Join_OpportunityOwner","relationship":"Opportunity"}},"Join_OpportunityStage_Previous_with_Opp_Amount":{"action":"augment","parameters":{"right_key":["Id"],"left":"Join_OpportunityStage_Previous_with_Opp","left_key":["OpportunityId"],"right_select":["Amount"],"right":"Extract_OpportunityAmount","relationship":"Opportunity"}},"Join_OpportunityLineItemPricebookEntryProduct":{"action":"augment","parameters":{"right_key":["Id"],"left":"Join_OpportunityLineItemPricebookEntry","left_key":["Pricebook.Product2Id"],"right_select":["ProductCode","Name","Family"],"right":"Extract_Product","relationship":"Product"}},"Register_PlainQuota":{"action":"sfdcRegister","parameters":{"SFDCtoken":"SFDCtoken","name":"Quota","alias":"plain_quota","source":"Extract_Quota"}},"Join_TaskOwner_Product_Opp_User":{"action":"augment","parameters":{"right_key":["Id"],"left":"Join_TaskOwner_Product_Opp","left_key":["OwnerId"],"right_select":["Name"],"right":"Filter_User","relationship":"AssignedTo"}},"Register_Task":{"action":"sfdcRegister","parameters":{"SFDCtoken":"SFDCtoken","rowLevelSecurityFilter":"'Owner.Role.Roles' == \"$User.UserRoleId\" || 'OwnerId' == \"$User.Id\"","name":"Task","alias":"task","source":"Join_TaskOwner_Product_Opp_User"}},"Register_OpportunityProducts":{"action":"sfdcRegister","parameters":{"SFDCtoken":"SFDCtoken","rowLevelSecurityFilter":"'Opportunity.Owner.Role.Roles' == \"$User.UserRoleId\" || 'Opportunity.OwnerId' == \"$User.Id\"","name":"Oppty Products","alias":"opportunity_products","source":"Join_OpportunityOpportunityLineItemPricebookEntryProduct"}},"Register_UserManager":{"action":"sfdcRegister","parameters":{"SFDCtoken":"SFDCtoken","rowLevelSecurityFilter":"'Role.Roles' == \"$User.UserRoleId\" || 'Id' == \"$User.Id\"","name":"User Manager","alias":"user","source":"Flatten_UserRoleNames"}},"Join_OpportunityStage":{"action":"augment","parameters":{"right_key":["MasterLabel"],"left":"Flag_For_Days_in_Current_Stage","left_key":["StageName"],"right_select":["IsClosed","IsWon"],"right":"Extract_OpportunityStage","relationship":"Stage"}},"Join_EventOwner_Product_Opp_User":{"action":"augment","parameters":{"right_key":["Id"],"left":"Join_EventOwner_Product_Opp","left_key":["OwnerId"],"right_select":["Name"],"right":"Extract_User","relationship":"AssignedTo"}},"Register_UserRole":{"action":"sfdcRegister","parameters":{"SFDCtoken":"SFDCtoken","rowLevelSecurityFilter":"'Id' == \"$User.Id\"","name":"User Role","alias":"user_role","source":"Flatten_UserRoleNames"}},"Join_EventOwner_Product":{"action":"augment","parameters":{"right_key":["OpportunityId"],"left":"Join_EventOwner","left_key":["WhatId"],"right_select":["Product.Family","Product.Name"],"right":"Join_OpportunityOpportunityLineItemPricebookEntryProduct","relationship":"Opportunity","operation":"LookupMultiValue"}},"computeTrending":{"action":"computeRelative","parameters":{"partitionBy":["OpportunityId"],"orderBy":[{"name":"CreatedDate","direction":"asc"}],"source":"Extract_OpportunityHistory","computedFields":[{"expression":{"sourceField":"CreatedDate","default":"current()","offset":"first()"},"name":"OpportunityCreatedDate","description":"Opportunity Created Date","label":"OpportunityCreatedDate"},{"expression":{"sourceField":"CreatedDate","default":"3000-01-01T00:00:00.000Z","offset":"next()"},"name":"ValidToDate","description":"ValidToDate","label":"ValidToDate"},{"expression":{"sourceField":"CreatedDate","default":"current()","offset":"current()"},"name":"ValidFromDate","description":"ValidFromDate","label":"ValidFromDate"},{"expression":{"sourceField":"Amount","default":"0","offset":"previous()"},"name":"AmountPrev","description":"AmountPrev","label":"AmountPrev"},{"expression":{"sourceField":"StageName","default":null,"offset":"previous()"},"name":"StageNamePrev","description":"Previous Stage Name","label":"Prev Stage Name"},{"expression":{"sourceField":"ForecastCategory","default":null,"offset":"previous()"},"name":"ForecastCategoryPrev","description":"ForecastCategoryPrev","label":"ForecastCategoryPrev"},{"expression":{"sourceField":"CloseDate","default":"1970-01-01","offset":"previous()"},"name":"CloseDatePrev","description":"Previous Close Date","label":"Prev Close Date"},{"expression":{"sourceField":"CreatedDate","default":null,"offset":"previous()"},"name":"CreatedDatePrev","description":"Previous Created Date","label":"Prev CreatedDate"}]}},"Extract_OpportunityHistory":{"schema":{"objects":[{"label":"OpportunityHistory","fields":[{"format":"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'","name":"CreatedDate","description":"Opportunity Created Date","label":"CreatedDate"},{"name":"Amount","description":"Amount","label":"Amount"}]}]},"action":"sfdcDigest","parameters":{"fields":[{"name":"Amount"},{"fiscalMonthOffset":0,"name":"CloseDate"},{"name":"CreatedById"},{"fiscalMonthOffset":0,"name":"CreatedDate"},{"name":"ForecastCategory"},{"name":"Id"},{"name":"IsDeleted"},{"name":"OpportunityId"},{"name":"StageName"}],"object":"OpportunityHistory"}},"Extract_OpportunityLineItem":{"action":"sfdcDigest","parameters":{"SFDCtoken":"SFDCtoken","fields":[{"name":"OpportunityId"},{"name":"ProductCode"},{"name":"ListPrice"},{"name":"Quantity"},{"name":"TotalPrice"},{"name":"PricebookEntryId"}],"object":"OpportunityLineItem"}},"Flatten_UserRoleNames":{"schema":{"objects":[{"label":"Flatten_UserRoleNames","fields":[{"name":"RoleNames","label":"RoleNames","isSystemField":false},{"name":"RoleNamesPath","label":"RoleNamesPath","isSystemField":false}]}]},"action":"flatten","parameters":{"self_field":"Role.DeveloperName","multi_field":"RoleNames","parent_field":"ParentRole.DeveloperName","path_field":"RoleNamesPath","source":"User_with_Roles_ParentName"}},"Register_Pipeline_Trending":{"action":"sfdcRegister","parameters":{"rowLevelSecurityFilter":"'Opportunity.Owner.Role.Roles' == \"$User.UserRoleId\" || 'Opportunity.OwnerId' == \"$User.Id\"","name":"Pipeline Trending","alias":"pipeline_trending","source":"Join_OpportunityStage_Previous_with_Opp_Amount_Product"}},"Discount_Field":{"action":"computeExpression","parameters":{"source":"Extract_OpportunityLineItem","mergeWithSource":true,"computedFields":[{"precision":7,"name":"Discount_Percent","saqlExpression":"1-(('TotalPrice')/('ListPrice' * 'Quantity'))","scale":6,"type":"Numeric"}]}},"Register_Opportunity":{"action":"sfdcRegister","parameters":{"SFDCtoken":"SFDCtoken","rowLevelSecurityFilter":"'Owner.Role.Roles' == \"$User.UserRoleId\" || 'OwnerId' == \"$User.Id\"","name":"Opportunities","alias":"opportunity","source":"Join_OpportunityOwner_Product"}},"Join_OpportunityLineItemPricebookEntry":{"action":"augment","parameters":{"right_key":["Id"],"left":"Discount_Field","left_key":["PricebookEntryId"],"right_select":["Product2Id"],"right":"Extract_PricebookEntry","relationship":"Pricebook"}},"Extract_Task":{"action":"sfdcDigest","parameters":{"fields":[{"name":"Id"},{"name":"CallDurationInSeconds"},{"name":"CallDisposition"},{"name":"CallType"},{"name":"OwnerId"},{"name":"Status"},{"name":"Priority"},{"name":"IsClosed"},{"name":"TaskSubtype"},{"fiscalMonthOffset":0,"name":"CreatedDate"},{"fiscalMonthOffset":0,"name":"ActivityDate"},{"fiscalMonthOffset":0,"name":"LastModifiedDate"},{"name":"Subject"},{"name":"WhatId"}],"complexFilterConditions":"CreatedDate >= LAST_N_DAYS:730","object":"Task"}},"Join_AccountOwner":{"action":"augment","parameters":{"right_key":["Id"],"left":"Extract_Account","left_key":["OwnerId"],"right_select":["Name","Username","UserRoleId","Role.Name","Role.DeveloperName","Role.Roles","Role.RolePath","Role.ParentRoleId","ParentRole.Name","ParentRole.DeveloperName","RoleNames","RoleNamesPath"],"right":"Flatten_UserRoleNames","relationship":"Owner"}},"Join_EventOwner":{"action":"augment","parameters":{"right_key":["Id"],"left":"Extract_Event","left_key":["OwnerId"],"right_select":["Name","Username","UserRoleId","Role.Name","Role.DeveloperName","Role.Roles","Role.RolePath","Role.ParentRoleId","ParentRole.Name","ParentRole.DeveloperName","RoleNames","RoleNamesPath"],"right":"Flatten_UserRoleNames","relationship":"Owner"}},"Join_OpportunityOwner":{"action":"augment","parameters":{"right_key":["Id"],"left":"Join_OpportunityAccount","left_key":["OwnerId"],"right_select":["Name","Username","UserRoleId","Role.Name","Role.DeveloperName","Role.Roles","Role.RolePath","Role.ParentRoleId","ParentRole.Name","ParentRole.DeveloperName","RoleNames","RoleNamesPath"],"right":"Flatten_UserRoleNames","relationship":"Owner"}},"Join_EventOwner_Product_Opp":{"action":"augment","parameters":{"right_key":["Id"],"left":"Join_EventOwner_Product","left_key":["WhatId"],"right_select":["Id","Name","Type","OwnerId","IsWon","IsClosed","AccountId","CloseDate","StageName","CreatedDate","LeadSource","ForecastCategoryName","Account.Name","Account.Type","Account.Industry","Account.AccountSource","Account.BillingCountry","Account.BillingState"],"right":"Join_OpportunityOwner","relationship":"Opportunity"}},"Join_OpportunityAccount":{"action":"augment","parameters":{"right_key":["Id"],"left":"Extract_Opportunity","left_key":["AccountId"],"right_select":["Name","Type","Industry","BillingCountry","BillingState","AccountSource","OwnerId","Owner.Name","Owner.Role.Name","Owner.Role.Roles","Owner.Role.RolePath","Owner.Role.ParentRoleId"],"right":"Join_AccountOwner","relationship":"Account"}},"Register_QuotaWithRoles":{"action":"sfdcRegister","parameters":{"SFDCtoken":"SFDCtoken","name":"Quota User Manager","alias":"quota","source":"Join_Quota_User"}},"Filter_User":{"action":"filter","parameters":{"filter":"IsActive:EQ:true","source":"Extract_User"}},"Join_TaskOwner_Product":{"action":"augment","parameters":{"right_key":["OpportunityId"],"left":"Join_TaskOwner","left_key":["WhatId"],"right_select":["Product.Family","Product.Name"],"right":"Join_OpportunityOpportunityLineItemPricebookEntryProduct","relationship":"Opportunity","operation":"LookupMultiValue"}},"Join_OpportunityStage_Previous_with_Opp_Amount_Product":{"action":"augment","parameters":{"right_key":["OpportunityId"],"left":"Join_OpportunityStage_Previous_with_Opp_Amount","left_key":["OpportunityId"],"right_select":["Product.Family","Product.Name"],"right":"Join_OpportunityOpportunityLineItemPricebookEntryProduct","relationship":"Opportunity","operation":"LookupMultiValue"}},"Flag_For_Days_in_Current_Stage":{"action":"computeExpression","parameters":{"source":"Extract_OpportunityHistory","mergeWithSource":true,"computedFields":[{"defaultValue":"\"1\"","name":"Stage_isUpdated","saqlExpression":"case when 'StageName' == 'StageNamePrev' then \"0\" else \"1\" end","type":"Text"},{"defaultValue":"\"1\"","name":"CloseDate_isUpdated","saqlExpression":"case when 'CloseDatePrev' == 'CloseDate' then \"0\" else \"1\" end","type":"Text"}]}},"Join_Quota_User":{"action":"augment","parameters":{"right_key":["Username"],"left":"Extract_Quota","left_key":["Username"],"right_select":["Id","Name","Username","UserRoleId","Role.Name","Role.DeveloperName","Role.Roles","Role.RolePath","Role.ParentRoleId","ParentRole.Name","ParentRole.DeveloperName","RoleNames","RoleNamesPath"],"right":"Flatten_UserRoleNames","relationship":"User"}},"Extract_Account":{"action":"sfdcDigest","parameters":{"SFDCtoken":"SFDCtoken","fields":[{"name":"Id"},{"name":"Name"},{"name":"OwnerId"},{"name":"AccountSource"},{"name":"Type"},{"name":"Industry"},{"name":"BillingCountry"},{"name":"BillingState"},{"fiscalMonthOffset":0,"name":"CreatedDate"},{"fiscalMonthOffset":0,"name":"LastModifiedDate"}],"object":"Account"}},"Join_TaskOwner":{"action":"augment","parameters":{"right_key":["Id"],"left":"Extract_Task","left_key":["OwnerId"],"right_select":["Name","Username","UserRoleId","Role.Name","Role.DeveloperName","Role.Roles","Role.RolePath","Role.ParentRoleId","ParentRole.Name","ParentRole.DeveloperName","RoleNames","RoleNamesPath"],"right":"Flatten_UserRoleNames","relationship":"Owner"}},"Join_OpportunityOpportunityLineItemPricebookEntryProduct":{"action":"augment","parameters":{"right_key":["Id"],"left":"Join_OpportunityLineItemPricebookEntryProduct","left_key":["OpportunityId"],"right_select":["Name","StageName","CloseDate","IsWon","Type","IsClosed","LeadSource","ForecastCategory","ForecastCategoryName","CreatedDate","AccountId","Account.Name","Account.OwnerId","Account.Type","Account.Industry","Account.BillingCountry","Account.BillingState","Account.AccountSource","Account.Owner.Name","Account.Owner.Role.Name","Account.Owner.Role.Roles","Account.Owner.Role.RolePath","OwnerId","Owner.Name","Owner.Role.Name","Owner.Role.DeveloperName","Owner.Role.Roles","Owner.Role.RolePath","Owner.Role.ParentRoleId"],"right":"Join_OpportunityOwner","relationship":"Opportunity"}},"Extract_Quota":{"action":"edgemart","parameters":{"alias":"plain_quota"}},"User_with_Roles_ParentName":{"_comment":"get parent role's rolename","action":"augment","parameters":{"right_key":["Id"],"left":"User_with_Roles","left_key":["Role.ParentRoleId"],"right_select":["Name","DeveloperName"],"right":"Extract_UserRole","relationship":"ParentRole"}},"Extract_UserRole":{"action":"sfdcDigest","parameters":{"SFDCtoken":"SFDCtoken","fields":[{"name":"Id"},{"name":"Name"},{"name":"DeveloperName"},{"name":"ParentRoleId"},{"fiscalMonthOffset":0,"name":"LastModifiedDate"},{"name":"LastModifiedById"},{"name":"SystemModstamp"}],"object":"UserRole"}},"User_with_Roles":{"_comment":"Get user's role hierarchy","action":"augment","parameters":{"right_key":["Id"],"left":"Filter_User","left_key":["UserRoleId"],"right_select":["Name","DeveloperName","Roles","RolePath","ParentRoleId"],"right":"Flatten_UserRole","relationship":"Role"}},"Join_OpportunityOwner_Product":{"action":"augment","parameters":{"right_key":["OpportunityId"],"left":"Join_OpportunityOwner","left_key":["Id"],"right_select":["Product.Family","Product.Name"],"right":"Join_OpportunityOpportunityLineItemPricebookEntryProduct","relationship":"Product","operation":"LookupMultiValue"}},"Extract_Event":{"action":"sfdcDigest","parameters":{"fields":[{"name":"OwnerId"},{"fiscalMonthOffset":0,"name":"CreatedDate"},{"fiscalMonthOffset":0,"name":"LastModifiedDate"},{"fiscalMonthOffset":0,"name":"ActivityDate"},{"name":"Subject"},{"name":"DurationInMinutes"},{"name":"EventSubtype"},{"name":"WhatId"}],"complexFilterConditions":"CreatedDate >= LAST_N_DAYS:730","object":"Event"}},"Flatten_UserRole":{"schema":{"objects":[{"label":"Flatten_UserRole","fields":[{"name":"Roles","label":"Roles","isSystemField":false},{"name":"RolePath","label":"RolePath","isSystemField":false}]}]},"action":"flatten","parameters":{"self_field":"Id","multi_field":"Roles","parent_field":"ParentRoleId","path_field":"RolePath","source":"Extract_UserRole"}},"Join_OpportunityStage_Previous":{"action":"augment","parameters":{"right_key":["MasterLabel"],"left":"Join_OpportunityStage","left_key":["StageNamePrev"],"right_select":["IsClosed","IsWon"],"right":"Extract_OpportunityStage","relationship":"StagePrev"}},"Register_Event":{"action":"sfdcRegister","parameters":{"SFDCtoken":"SFDCtoken","rowLevelSecurityFilter":"'Owner.Role.Roles' == \"$User.UserRoleId\" || 'OwnerId' == \"$User.Id\"","name":"Event","alias":"event","source":"Join_EventOwner_Product_Opp_User"}}}}]}