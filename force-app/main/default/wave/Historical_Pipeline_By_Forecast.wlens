{"dataSourceLinks":[],"filters":[],"gridLayouts":[],"layouts":[],"steps":{"saql":{"broadcastFacet":true,"groups":["Month","ForecastCategory.ForecastCategoryName"],"numbers":["sum_Amount"],"query":"q = load \"eadx__pipeline_trending\";\nq = filter q by 'Stage.IsClosed' == \"false\";\nq = filter q by 'ForecastCategory' != \"Omitted\";\ntoday = filter q by 'IsLastUpdate' == \"1\";\ntoday = group today by 'ForecastCategory.ForecastCategoryName';\ntoday = foreach today generate 'ForecastCategory.ForecastCategoryName' as 'ForecastCategory.ForecastCategoryName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 0 as 'time_sort', \"Current\" as 'Month';\none = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"1 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"current month\"..]);\none = group one by 'ForecastCategory.ForecastCategoryName';\none = foreach one generate 'ForecastCategory.ForecastCategoryName' as 'ForecastCategory.ForecastCategoryName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 1 as 'time_sort', \"This Month\" as 'Month';\ntwo = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"2 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"1 month ago\"..]);\ntwo = group two by 'ForecastCategory.ForecastCategoryName';\ntwo = foreach two generate 'ForecastCategory.ForecastCategoryName' as 'ForecastCategory.ForecastCategoryName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 2 as 'time_sort', \"1 month ago\" as 'Month';\nthree = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"3 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"2 months ago\"..]);\nthree = group three by 'ForecastCategory.ForecastCategoryName';\nthree = foreach three generate 'ForecastCategory.ForecastCategoryName' as 'ForecastCategory.ForecastCategoryName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 3 as 'time_sort', \"2 months ago\" as 'Month';\nfour = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"4 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"3 months ago\"..]);\nfour = group four by 'ForecastCategory.ForecastCategoryName';\nfour = foreach four generate 'ForecastCategory.ForecastCategoryName' as 'ForecastCategory.ForecastCategoryName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 4 as 'time_sort', \"3 months ago\" as 'Month';\nfive = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"5 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"4 months ago\"..]);\nfive = group five by 'ForecastCategory.ForecastCategoryName';\nfive = foreach five generate 'ForecastCategory.ForecastCategoryName' as 'ForecastCategory.ForecastCategoryName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 5 as 'time_sort', \"4 months ago\" as 'Month';\nsix = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"6 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"5 month ago\"..]);\nsix = group six by 'ForecastCategory.ForecastCategoryName';\nsix = foreach six generate 'ForecastCategory.ForecastCategoryName' as 'ForecastCategory.ForecastCategoryName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 6 as 'time_sort', \"5 months ago\" as 'Month';\nseven = filter q by (date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"7 months ago\"]) && (date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"6 month ago\"..]);\nseven = group seven by 'ForecastCategory.ForecastCategoryName';\nseven = foreach seven generate 'ForecastCategory.ForecastCategoryName' as 'ForecastCategory.ForecastCategoryName', sum('Amount') as 'sum_Amount', last('Opportunity.Stage.SortOrder') as 'stage_sort', 7 as 'time_sort', \"6 months ago\" as 'Month';\nresult = union today, one, two, three, four, five, six, seven;\nresult = group result by ('Month', 'ForecastCategory.ForecastCategoryName');\nresult = foreach result generate 'ForecastCategory.ForecastCategoryName' as 'ForecastCategory.ForecastCategoryName', 'Month' as 'Month', sum('sum_Amount') as 'sum_Amount', first('stage_sort') as 'stage_sort', first('time_sort') as 'time_sort';\nresults = order result by ('time_sort' desc, 'stage_sort' asc);\n","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"none","strings":["Month","ForecastCategory.ForecastCategoryName"],"type":"saql","useGlobal":true}},"widgets":{"saql_chart":{"parameters":{"autoFitMode":"fit","totalValue":"computeTotal","showValues":true,"legend":{"descOrder":false,"showHeader":true,"sorting":{"order":"asc"},"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"showBinLabel":true,"measures":"","showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"stackvbar","exploreLink":false,"title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"totalLabel":"","columnMap":{"split":["ForecastCategory.ForecastCategoryName"],"trellis":[],"dimensionAxis":["Month"],"plots":["sum_Amount"]},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"normalize":false,"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","step":"saql","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}}}