["{\"nodes\":{\"Join_ServiceCaseServiceTask\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"relationship\":\"Task\",\"rightKey\":[\"WhatId\"],\"rightSelect\":[\"ActivityLastModifiedDate\"]},\"sources\":[\"Join_CaseAccount\",\"Compute_Extract_Task\"]},\"Register_ActivityOwner_Case\":{\"action\":\"register\",\"parameters\":{\"label\":\"ServiceActivity\",\"name\":\"eadx__ServiceActivity\",\"runtime\":{\"SFDCtoken\":\"SFDCtoken\"}},\"sources\":[\"Filter_Activities\"]},\"Join_CaseAccount\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"AccountId\"],\"relationship\":\"Account\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Id\",\"Name\",\"BillingState\",\"Industry\"]},\"sources\":[\"compute_CalculatedCaseDuration\",\"Extract_Account\"]},\"Extract_Contact\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Name\"},{\"name\":\"Id\"}],\"object\":\"Contact\"}},\"Extract_Opportunity\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"AccountId\"},{\"name\":\"OwnerId\"},{\"name\":\"Name\"},{\"defaultValue\":\"N/A\",\"name\":\"StageName\"},{\"defaultValue\":\"N/A\",\"name\":\"LeadSource\"},{\"name\":\"IsWon\"},{\"name\":\"IsClosed\"},{\"defaultValue\":\"N/A\",\"name\":\"ForecastCategory\"},{\"defaultValue\":\"N/A\",\"name\":\"ForecastCategoryName\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"CreatedDate\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"CloseDate\"},{\"name\":\"Amount\"},{\"name\":\"CreatedById\"}],\"object\":\"Opportunity\",\"runtime\":{\"SFDCtoken\":\"SFDCtoken\"}}},\"Extract_Task\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"CallObject\"},{\"name\":\"CallDurationInSeconds\"},{\"defaultValue\":\"N/A\",\"name\":\"CallDisposition\"},{\"defaultValue\":\"N/A\",\"name\":\"CallType\"},{\"name\":\"OwnerId\"},{\"defaultValue\":\"N/A\",\"name\":\"Status\"},{\"defaultValue\":\"N/A\",\"name\":\"Priority\"},{\"name\":\"IsClosed\"},{\"defaultValue\":\"N/A\",\"name\":\"TaskSubtype\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"CreatedDate\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"ActivityDate\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"LastModifiedDate\"},{\"defaultValue\":\"N/A\",\"name\":\"Subject\"},{\"defaultValue\":\"N/A\",\"name\":\"WhatId\"}],\"object\":\"Task\"}},\"Join_CaseAccountContact\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"ContactId\"],\"relationship\":\"Contact\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"Id\"]},\"sources\":[\"computeJoin_ServiceCaseTaskEvent\",\"Extract_Contact\"]},\"Append_TaskEvent\":{\"action\":\"append\",\"parameters\":{},\"sources\":[\"Add_Fields_To_Task\",\"Add_Fields_To_Event\"]},\"Compute_Extract_Task\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"description\":\"ActivityLastModifiedDate\",\"expression\":{\"offset\":\"first()\",\"sourceField\":\"LastModifiedDate\",\"default\":\"current()\"},\"label\":\"ActivityLastModifiedDate\",\"name\":\"ActivityLastModifiedDate\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"LastModifiedDate\"}],\"partitionBy\":[\"WhatId\"]},\"sources\":[\"Extract_Task\"]},\"Handle_Only_Activities\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Is Activity\",\"name\":\"IsActivity\",\"saqlExpression\":\"case when 'Case.Id' is null then \\\"No\\\" else \\\"Yes\\\" end\",\"type\":\"Text\"},{\"label\":\"Is Call\",\"name\":\"IsCall\",\"saqlExpression\":\"case when CallDurationInSeconds > 0 then \\\"Yes\\\" else \\\"No\\\" end\",\"type\":\"Text\"},{\"label\":\"Activity Is Closed\",\"name\":\"ActivityIsClosed\",\"saqlExpression\":\"case when ('Type' == \\\"Task\\\" && 'IsClosed' == \\\"true\\\") ||  ('Case.CurrentDate_sec_epoch' > 'EndDateTime_sec_epoch') then \\\"Completed\\\" when ('Type' == \\\"Task\\\" && 'IsClosed' == \\\"false\\\") then \\\"Open\\\" else \\\"Open\\\" end\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Join_ActivityOwner_Case\"]},\"Extract_User\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"CallCenterId\"},{\"name\":\"Name\"},{\"name\":\"UserRoleId\"},{\"name\":\"Id\"}],\"object\":\"User\"}},\"Append_Queue_User\":{\"action\":\"append\",\"parameters\":{},\"sources\":[\"Add_Fields_To_Queue\",\"Add_Fields_To_User\"]},\"Extract_Case\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"AccountId\"},{\"name\":\"ContactId\"},{\"name\":\"OwnerId\"},{\"name\":\"Id\"},{\"defaultValue\":\"N/A\",\"name\":\"Origin\"},{\"defaultValue\":\"N/A\",\"name\":\"Reason\"},{\"defaultValue\":\"N/A\",\"name\":\"Type\"},{\"name\":\"IsClosed\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"ClosedDate\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"CreatedDate\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"LastModifiedDate\"},{\"name\":\"IsEscalated\"},{\"defaultValue\":\"N/A\",\"name\":\"Status\"},{\"defaultValue\":\"N/A\",\"name\":\"eadx__Product__c\"},{\"defaultValue\":\"N/A\",\"name\":\"Priority\"},{\"name\":\"CaseNumber\"}],\"object\":\"Case\"}},\"Join_CaseAccountContactUser\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"OwnerId\"],\"relationship\":\"Owner\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"CallCenterId\",\"Name\",\"Id\",\"UserRoleId\",\"Type\"]},\"sources\":[\"Join_CaseAccountContact\",\"Append_Queue_User\"]},\"Join_OpportunityRecordTypeAccount\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"AccountId\"],\"relationship\":\"Account\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Id\",\"Name\",\"Industry\"]},\"sources\":[\"Extract_Opportunity\",\"Extract_Account\"]},\"Add_Fields_To_Event\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"CallObject\",\"name\":\"CallObject\",\"saqlExpression\":\"\\\"000000000000000\\\"\",\"type\":\"Text\"},{\"label\":\"Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"Event\\\"\",\"type\":\"Text\"},{\"label\":\"CallDisposition\",\"name\":\"CallDisposition\",\"saqlExpression\":\"\\\"Event\\\"\",\"type\":\"Text\"},{\"label\":\"CallType\",\"name\":\"CallType\",\"saqlExpression\":\"\\\"Event\\\"\",\"type\":\"Text\"},{\"label\":\"Status\",\"name\":\"Status\",\"saqlExpression\":\"\\\"Event\\\"\",\"type\":\"Text\"},{\"label\":\"Priority\",\"name\":\"Priority\",\"saqlExpression\":\"\\\"Event\\\"\",\"type\":\"Text\"},{\"label\":\"TaskSubtype\",\"name\":\"TaskSubtype\",\"saqlExpression\":\"EventSubtype\",\"type\":\"Text\"},{\"label\":\"ActivityType\",\"name\":\"ActivityType\",\"saqlExpression\":\"EventSubtype\",\"type\":\"Text\"},{\"defaultValue\":\"0\",\"label\":\"CallDurationInSeconds\",\"name\":\"CallDurationInSeconds\",\"precision\":8,\"saqlExpression\":\"0\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"IsClosed\",\"name\":\"IsClosed\",\"saqlExpression\":\"case when date(ActivityDate_Year,ActivityDate_Month,ActivityDate_Day) in [\\\"1 year ago\\\"..\\\"current day\\\"] then \\\"false\\\" else \\\"true\\\" end\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_Event\"]},\"Extract_Queue\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"}],\"object\":\"Group\",\"passthroughFilter\":\"Type = 'Queue'\"}},\"compute_CalculatedCaseDuration\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"0\",\"label\":\"Case Duration\",\"name\":\"DurationCalculatedField\",\"precision\":18,\"saqlExpression\":\"case  when ('IsClosed' == \\\"true\\\") then ('ClosedDate_sec_epoch' - 'CreatedDate_sec_epoch')/86400   else ('CurrentDate_sec_epoch' - 'CreatedDate_sec_epoch')/86400  end\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"compute_CurrentDateForCase\"]},\"Join_ActivityOwner_Case\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"WhatId\"],\"relationship\":\"Case\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Id\",\"Origin\",\"Reason\",\"Type\",\"IsClosed\",\"ClosedDate\",\"CreatedDate\",\"Status\",\"eadx__Product__c\",\"Priority\",\"CaseNumber\",\"Account.Name\",\"Account.Id\",\"DurationCalculatedField\",\"Role.Name\",\"CurrentDate\"]},\"sources\":[\"Join_ActivityOwner\",\"Join_CaseAccountContactUserUserRole\"]},\"computeJoin_ServiceCaseTaskEvent\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"0\",\"label\":\"Last LastModifiedDate\",\"name\":\"sum_last_activity\",\"precision\":18,\"saqlExpression\":\"case when ('Task.ActivityLastModifiedDate_sec_epoch' > 'Event.ActivityLastModifiedDate_sec_epoch' && 'Task.ActivityLastModifiedDate_sec_epoch' >= 'LastModifiedDate_sec_epoch') then  ('CurrentDate_sec_epoch' - 'Task.ActivityLastModifiedDate_sec_epoch')/86400 when ('Event.ActivityLastModifiedDate_sec_epoch' > 'Task.ActivityLastModifiedDate_sec_epoch' && 'Event.ActivityLastModifiedDate_sec_epoch' >= 'LastModifiedDate_sec_epoch') then ('CurrentDate_sec_epoch' - 'Event.ActivityLastModifiedDate_sec_epoch')/86400  when ('LastModifiedDate_sec_epoch' >= 'Task.ActivityLastModifiedDate_sec_epoch' && 'LastModifiedDate_sec_epoch' >= 'Event.ActivityLastModifiedDate_sec_epoch') then ('CurrentDate_sec_epoch' - 'LastModifiedDate_sec_epoch')/86400  else ('CurrentDate_sec_epoch' - 'LastModifiedDate_sec_epoch')/86400 end\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"Join_ServiceCaseTaskEvent\"]},\"compute_CurrentDateForCase\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"format\":\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\",\"label\":\"CurrentDate\",\"name\":\"CurrentDate\",\"saqlExpression\":\"now()\",\"type\":\"Date\"},{\"format\":\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\",\"label\":\"ValidToWithNow\",\"name\":\"ValidToWithNow\",\"saqlExpression\":\"case  when ('IsClosed' == \\\"true\\\") then toDate('ClosedDate', \\\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\\\") else now()  end\",\"type\":\"Date\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_Case\"]},\"Extract_Account\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"defaultValue\":\"N/A\",\"name\":\"BillingState\"},{\"defaultValue\":\"N/A\",\"name\":\"Industry\"}],\"object\":\"Account\"}},\"Add_Fields_To_User\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"User\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_User\"]},\"Join_ServiceCaseTaskEvent\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"relationship\":\"Event\",\"rightKey\":[\"WhatId\"],\"rightSelect\":[\"ActivityLastModifiedDate\"]},\"sources\":[\"Join_ServiceCaseServiceTask\",\"Compute_Extract_Event\"]},\"Join_OpportunityRecordTypeAccountCase\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"AccountId\"],\"relationship\":\"Case\",\"rightKey\":[\"AccountId\"],\"rightSelect\":[\"Id\",\"CaseNumber\",\"IsEscalated\",\"Priority\"]},\"sources\":[\"Join_OpportunityRecordTypeAccount\",\"compute_CalculatedCaseDuration\"]},\"computeJoin_ServiceCaseTask\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"0\",\"label\":\"Last LastModifiedDate\",\"name\":\"sum_last_activity\",\"precision\":18,\"saqlExpression\":\"case when ('Task.ActivityLastModifiedDate_sec_epoch' >= 'LastModifiedDate_sec_epoch') then ('CurrentDate_sec_epoch' - 'Task.ActivityLastModifiedDate_sec_epoch')/86400 when ('LastModifiedDate_sec_epoch' >= 'Task.ActivityLastModifiedDate_sec_epoch') then ('CurrentDate_sec_epoch' - 'LastModifiedDate_sec_epoch')/86400  else ('CurrentDate_sec_epoch' - 'LastModifiedDate_sec_epoch')/86400 end\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"Join_ServiceCaseServiceTask\"]},\"Join_ActivityOwner\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"OwnerId\"],\"relationship\":\"Owner\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"Id\",\"UserRoleId\"]},\"sources\":[\"Append_TaskEvent\",\"Extract_User\"]},\"Add_Fields_To_Task\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"format\":\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\",\"label\":\"EndDateTime\",\"name\":\"EndDateTime\",\"saqlExpression\":\"now()\",\"type\":\"Date\"},{\"label\":\"Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"Task\\\"\",\"type\":\"Text\"},{\"label\":\"EventSubtype\",\"name\":\"EventSubtype\",\"saqlExpression\":\"TaskSubtype\",\"type\":\"Text\"},{\"label\":\"ActivityType\",\"name\":\"ActivityType\",\"saqlExpression\":\"TaskSubtype\",\"type\":\"Text\"},{\"label\":\"ShowAs\",\"name\":\"ShowAs\",\"saqlExpression\":\"\\\"Task\\\"\",\"type\":\"Text\"},{\"defaultValue\":\"0\",\"label\":\"DurationInMinutes\",\"name\":\"DurationInMinutes\",\"precision\":8,\"saqlExpression\":\"0\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_Task\"]},\"Extract_UserRole\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"ParentRoleId\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"LastModifiedDate\"},{\"name\":\"LastModifiedById\"},{\"name\":\"SystemModstamp\"}],\"object\":\"UserRole\"}},\"Join_CaseAccountContactUserUserRole\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Owner.UserRoleId\"],\"relationship\":\"Role\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"ParentRoleId\"]},\"sources\":[\"Join_CaseAccountContactUser\",\"Extract_UserRole\"]},\"Add_Fields_To_Queue\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"CallCenterId\",\"name\":\"CallCenterId\",\"saqlExpression\":\"\\\"000000000000000\\\"\",\"type\":\"Text\"},{\"label\":\"Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"Queue\\\"\",\"type\":\"Text\"},{\"label\":\"UserRoleId\",\"name\":\"UserRoleId\",\"saqlExpression\":\"\\\"000000000000000\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_Queue\"]},\"Compute_Extract_Event\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"description\":\"ActivityLastModifiedDate\",\"expression\":{\"offset\":\"first()\",\"sourceField\":\"LastModifiedDate\",\"default\":\"current()\"},\"label\":\"ActivityLastModifiedDate\",\"name\":\"ActivityLastModifiedDate\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"LastModifiedDate\"}],\"partitionBy\":[\"WhatId\"]},\"sources\":[\"Extract_Event\"]},\"Filter_Activities\":{\"action\":\"filter\",\"parameters\":{\"filter\":\"IsActivity:EQ:Yes\"},\"sources\":[\"Handle_Only_Activities\"]},\"Extract_Event\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"OwnerId\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"CreatedDate\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"LastModifiedDate\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"isYearEndFiscalYear\":false,\"name\":\"ActivityDate\"},{\"name\":\"EndDateTime\"},{\"defaultValue\":\"N/A\",\"name\":\"Subject\"},{\"name\":\"ShowAs\"},{\"name\":\"DurationInMinutes\"},{\"defaultValue\":\"N/A\",\"name\":\"EventSubtype\"},{\"defaultValue\":\"N/A\",\"name\":\"WhatId\"}],\"object\":\"Event\"}},\"Register_Case\":{\"action\":\"register\",\"parameters\":{\"label\":\"ServiceCase\",\"name\":\"eadx__ServiceCase\",\"runtime\":{\"SFDCtoken\":\"SFDCtoken\"}},\"sources\":[\"Join_CaseAccountContactUserUserRole\"]},\"Register_Opportunity\":{\"action\":\"register\",\"parameters\":{\"label\":\"ServiceOpportunities\",\"name\":\"eadx__ServiceOpportunity\",\"runtime\":{\"SFDCtoken\":\"SFDCtoken\"}},\"sources\":[\"Join_OpportunityRecordTypeAccountCase\"]}}}",null]